<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
			
	<entry key="listCount">
		SELECT COUNT(*) COUNT
		FROM BOARD
		WHERE STATUS = 'Y'
	</entry>		
	
	
	<entry key="selectList">
		SELECT *
		FROM (SELECT ROWNUM RNUM,A.*
		      FROM (SELECT BOARD_NO,
		                   CATEGORY_NAME,
		                   BOARD_TITLE,
		                   USER_NAME,
		                   COUNT,
		                   CREATE_DATE
		            FROM BOARD B
		            JOIN CATEGORY USING(CATEGORY_NO)
		            JOIN MEMBER M ON (USER_NO=BOARD_WRITER)
		            WHERE B.STATUS ='Y'
		            AND BOARD_TYPE=1
		            ORDER BY CREATE_DATE DESC) A)
		WHERE RNUM BETWEEN ? AND ?
	</entry>
	
	<!-- 조회수 증가 구문-->
	<entry key="increaseCount">
		UPDATE BOARD
		SET COUNT = COUNT + 1
		WHERE BOARD_NO = ?
		AND STATUS = 'Y'
	</entry>
	
	<!-- 게시글 상세 조회 구문  -->
	<entry key="selectBoard">
		<!-- 조회할 데이터 : 번호 카테고리명 글제목 글내용 작성자명 작성일 -->
		SELECT BOARD_NO
		      ,CATEGORY_NAME
		      ,BOARD_TITLE
		      ,BOARD_CONTENT
		      ,USER_ID
		      ,CREATE_DATE
		FROM BOARD B
		LEFT JOIN CATEGORY USING(CATEGORY_NO)
		JOIN MEMBER M ON (USER_NO=BOARD_WRITER)
		WHERE BOARD_NO = ?
		AND B.STATUS ='Y'
	</entry>
	
	<!-- 카테고리 목록 조회 -->
	<entry key="selectCategory">
		SELECT CATEGORY_NO
     		  ,CATEGORY_NAME
		FROM CATEGORY
	</entry>
	
	<!-- 게시글 번호 추출(시퀀스 발행) -->
	<entry key="selectBoardNo">
		SELECT SEQ_BNO.NEXTVAL BNO
		FROM DUAL
	</entry>
	
	<!-- 게시글 등록 -->
	<entry key="insertBoard">
		INSERT INTO BOARD(BOARD_NO
		                 ,BOARD_TYPE
		                 ,CATEGORY_NO
		                 ,BOARD_TITLE
		                 ,BOARD_CONTENT
		                 ,BOARD_WRITER
               	 ) VALUES (?,
                  		   1,
                  		   ?,
                  		   ?,
                  		   ?,
                  		   ?)
	</entry>
	
	<!-- 첨부파일 등록 -->
	<entry key="insertAttachment">
		INSERT INTO ATTACHMENT(FILE_NO
		                      ,REF_BNO
		                      ,ORIGIN_NAME
		                      ,CHANGE_NAME
		                      ,FILE_PATH
             		 ) VALUES(SEQ_FNO.NEXTVAL
                              ,?
                              ,?
                              ,?
                              ,?
                              )
	</entry>
	
	<!-- 첨부파일 조회 -->
	<entry key="selectAttachment">
		SELECT FILE_NO
		      ,ORIGIN_NAME
		      ,CHANGE_NAME
		      ,FILE_PATH
		FROM ATTACHMENT
		WHERE REF_BNO = ?
		AND STATUS = 'Y'
	</entry>
	
	
	<!-- 게시글 수정 -->
	<entry key="updateBoard">
		UPDATE BOARD
		SET BOARD_TITLE = ?
		   ,BOARD_CONTENT = ?
		   ,CATEGORY_NO = ?
		WHERE BOARD_NO = ?
		AND STATUS = 'Y'   
	</entry>
	
	<!-- 첨부파일 수정 -->
	<entry key="updateAttachment">
		UPDATE ATTACHMENT
		SET ORIGIN_NAME = ?
		   ,CHANGE_NAME = ?
		   ,FILE_PATH = ?
		   ,UPLOAD_DATE = SYSDATE
		WHERE FILE_NO = ?
	
	</entry>
	
	
	<entry key="deleteBoard">
		UPDATE BOARD 
		SET STATUS = 'N'
		WHERE BOARD_NO = ?
		AND STATUS = 'Y'
	</entry>
	
	
	<!-- 사진 게시글 등록 -->
	<entry key="insertPhoto">
		INSERT INTO BOARD(BOARD_NO
		                 ,BOARD_TYPE
		                 ,BOARD_TITLE
		                 ,BOARD_CONTENT
		                 ,BOARD_WRITER
               	 ) VALUES (?,
                  		   2,
                  		   ?,
                  		   ?,
                  		   ?)
	</entry>
	
	
	<!-- 사진 게시글 첨부파일 등록 -->
	<entry key="insertAttachmentList">
		INSERT INTO ATTACHMENT(FILE_NO
		                      ,REF_BNO
		                      ,ORIGIN_NAME
		                      ,CHANGE_NAME
		                      ,FILE_PATH
		                      ,FILE_LEVEL
             		 ) VALUES(SEQ_FNO.NEXTVAL
                              ,?
                              ,?
                              ,?
                              ,?
                              ,?
                              )
	</entry>
	
	<!-- 사진게시글 목록 조회 메소드 -->
	<entry key="selectThumbnailList">
		SELECT BOARD_NO
		      ,BOARD_TITLE
		      ,COUNT
		      ,FILE_PATH||CHANGE_NAME TITLEIMG
		FROM BOARD B
		JOIN ATTACHMENT AT ON (BOARD_NO=REF_BNO)
		WHERE B.STATUS = 'Y'
		AND BOARD_TYPE=2
		AND FILE_LEVEL=1
		ORDER BY CREATE_DATE DESC
	</entry>
	
	<!-- 사진 게시글 상세 첨부파일 조회 -->
	<entry key="selectAttachmentList">
		SELECT CHANGE_NAME
		      ,FILE_PATH
		FROM ATTACHMENT
		WHERE REF_BNO = ?
	</entry>
	
	<!-- 댓글 작성 -->
	<entry key="insertReply">
	INSERT INTO REPLY(REPLY_NO
					,REPLY_CONTENT
					,REF_BNO
					,REPLY_WRITER)
            VALUES(SEQ_RNO.NEXTVAL
            		,?
            		,?
            		,?)
	</entry>
	
	<!-- 댓글 목록 조회 -->
	<entry key="replyList">
		SELECT REPLY_NO
			  ,REPLY_CONTENT
			  ,USER_ID
			  ,CREATE_DATE
		FROM REPLY
		JOIN MEMBER ON (USER_NO=REPLY_WRITER)
		WHERE REF_BNO = ?
	</entry>
	
	
	
			

</properties>